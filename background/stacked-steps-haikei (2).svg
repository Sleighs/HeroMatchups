<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 139L50 139L50 121L100 121L100 139L150 139L150 73L200 73L200 103L250 103L250 121L300 121L300 151L350 151L350 103L400 103L400 49L450 49L450 109L500 109L500 121L550 121L550 115L600 115L600 55L650 55L650 169L700 169L700 49L750 49L750 109L800 109L800 145L850 145L850 103L900 103L900 97L900 0L900 0L850 0L850 0L800 0L800 0L750 0L750 0L700 0L700 0L650 0L650 0L600 0L600 0L550 0L550 0L500 0L500 0L450 0L450 0L400 0L400 0L350 0L350 0L300 0L300 0L250 0L250 0L200 0L200 0L150 0L150 0L100 0L100 0L50 0L50 0L0 0Z" fill="#282c34"/><path d="M0 241L50 241L50 217L100 217L100 235L150 235L150 151L200 151L200 145L250 145L250 181L300 181L300 277L350 277L350 181L400 181L400 163L450 163L450 199L500 199L500 235L550 235L550 181L600 181L600 127L650 127L650 217L700 217L700 163L750 163L750 187L800 187L800 241L850 241L850 163L900 163L900 211L900 95L900 101L850 101L850 143L800 143L800 107L750 107L750 47L700 47L700 167L650 167L650 53L600 53L600 113L550 113L550 119L500 119L500 107L450 107L450 47L400 47L400 101L350 101L350 149L300 149L300 119L250 119L250 101L200 101L200 71L150 71L150 137L100 137L100 119L50 119L50 137L0 137Z" fill="#20262d"/><path d="M0 331L50 331L50 427L100 427L100 367L150 367L150 247L200 247L200 391L250 391L250 379L300 379L300 373L350 373L350 295L400 295L400 361L450 361L450 391L500 391L500 325L550 325L550 361L600 361L600 235L650 235L650 349L700 349L700 415L750 415L750 277L800 277L800 385L850 385L850 265L900 265L900 367L900 209L900 161L850 161L850 239L800 239L800 185L750 185L750 161L700 161L700 215L650 215L650 125L600 125L600 179L550 179L550 233L500 233L500 197L450 197L450 161L400 161L400 179L350 179L350 275L300 275L300 179L250 179L250 143L200 143L200 149L150 149L150 233L100 233L100 215L50 215L50 239L0 239Z" fill="#192025"/><path d="M0 385L50 385L50 487L100 487L100 457L150 457L150 295L200 295L200 457L250 457L250 415L300 415L300 409L350 409L350 349L400 349L400 439L450 439L450 475L500 475L500 415L550 415L550 433L600 433L600 295L650 295L650 385L700 385L700 493L750 493L750 379L800 379L800 487L850 487L850 349L900 349L900 403L900 365L900 263L850 263L850 383L800 383L800 275L750 275L750 413L700 413L700 347L650 347L650 233L600 233L600 359L550 359L550 323L500 323L500 389L450 389L450 359L400 359L400 293L350 293L350 371L300 371L300 377L250 377L250 389L200 389L200 245L150 245L150 365L100 365L100 425L50 425L50 329L0 329Z" fill="#131a1e"/><path d="M0 601L50 601L50 601L100 601L100 601L150 601L150 601L200 601L200 601L250 601L250 601L300 601L300 601L350 601L350 601L400 601L400 601L450 601L450 601L500 601L500 601L550 601L550 601L600 601L600 601L650 601L650 601L700 601L700 601L750 601L750 601L800 601L800 601L850 601L850 601L900 601L900 601L900 401L900 347L850 347L850 485L800 485L800 377L750 377L750 491L700 491L700 383L650 383L650 293L600 293L600 431L550 431L550 413L500 413L500 473L450 473L450 437L400 437L400 347L350 347L350 407L300 407L300 413L250 413L250 455L200 455L200 293L150 293L150 455L100 455L100 485L50 485L50 383L0 383Z" fill="#0b1417"/></svg>