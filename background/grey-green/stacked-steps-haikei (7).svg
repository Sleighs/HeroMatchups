<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 49L53 49L53 115L106 115L106 109L159 109L159 61L212 61L212 67L265 67L265 121L318 121L318 61L371 61L371 85L424 85L424 49L476 49L476 67L529 67L529 115L582 115L582 91L635 91L635 97L688 97L688 79L741 79L741 49L794 49L794 55L847 55L847 79L900 79L900 55L900 0L900 0L847 0L847 0L794 0L794 0L741 0L741 0L688 0L688 0L635 0L635 0L582 0L582 0L529 0L529 0L476 0L476 0L424 0L424 0L371 0L371 0L318 0L318 0L265 0L265 0L212 0L212 0L159 0L159 0L106 0L106 0L53 0L53 0L0 0Z" fill="#282c34"/><path d="M0 241L53 241L53 301L106 301L106 325L159 325L159 205L212 205L212 253L265 253L265 277L318 277L318 199L371 199L371 289L424 289L424 265L476 265L476 187L529 187L529 337L582 337L582 301L635 301L635 301L688 301L688 283L741 283L741 169L794 169L794 229L847 229L847 247L900 247L900 247L900 53L900 77L847 77L847 53L794 53L794 47L741 47L741 77L688 77L688 95L635 95L635 89L582 89L582 113L529 113L529 65L476 65L476 47L424 47L424 83L371 83L371 59L318 59L318 119L265 119L265 65L212 65L212 59L159 59L159 107L106 107L106 113L53 113L53 47L0 47Z" fill="#222831"/><path d="M0 325L53 325L53 409L106 409L106 379L159 379L159 349L212 349L212 343L265 343L265 373L318 373L318 343L371 343L371 433L424 433L424 385L476 385L476 301L529 301L529 463L582 463L582 427L635 427L635 379L688 379L688 403L741 403L741 271L794 271L794 313L847 313L847 391L900 391L900 397L900 245L900 245L847 245L847 227L794 227L794 167L741 167L741 281L688 281L688 299L635 299L635 299L582 299L582 335L529 335L529 185L476 185L476 263L424 263L424 287L371 287L371 197L318 197L318 275L265 275L265 251L212 251L212 203L159 203L159 323L106 323L106 299L53 299L53 239L0 239Z" fill="#1c252d"/><path d="M0 511L53 511L53 523L106 523L106 505L159 505L159 523L212 523L212 517L265 517L265 541L318 541L318 523L371 523L371 547L424 547L424 511L476 511L476 535L529 535L529 553L582 553L582 529L635 529L635 523L688 523L688 535L741 535L741 523L794 523L794 529L847 529L847 529L900 529L900 553L900 395L900 389L847 389L847 311L794 311L794 269L741 269L741 401L688 401L688 377L635 377L635 425L582 425L582 461L529 461L529 299L476 299L476 383L424 383L424 431L371 431L371 341L318 341L318 371L265 371L265 341L212 341L212 347L159 347L159 377L106 377L106 407L53 407L53 323L0 323Z" fill="#162229"/><path d="M0 601L53 601L53 601L106 601L106 601L159 601L159 601L212 601L212 601L265 601L265 601L318 601L318 601L371 601L371 601L424 601L424 601L476 601L476 601L529 601L529 601L582 601L582 601L635 601L635 601L688 601L688 601L741 601L741 601L794 601L794 601L847 601L847 601L900 601L900 601L900 551L900 527L847 527L847 527L794 527L794 521L741 521L741 533L688 533L688 521L635 521L635 527L582 527L582 551L529 551L529 533L476 533L476 509L424 509L424 545L371 545L371 521L318 521L318 539L265 539L265 515L212 515L212 521L159 521L159 503L106 503L106 521L53 521L53 509L0 509Z" fill="#101f24"/></svg>