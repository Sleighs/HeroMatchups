<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 97L50 97L50 79L100 79L100 37L150 37L150 79L200 79L200 37L250 37L250 91L300 91L300 49L350 49L350 85L400 85L400 97L450 97L450 73L500 73L500 97L550 97L550 43L600 43L600 85L650 85L650 67L700 67L700 61L750 61L750 73L800 73L800 79L850 79L850 55L900 55L900 79L900 0L900 0L850 0L850 0L800 0L800 0L750 0L750 0L700 0L700 0L650 0L650 0L600 0L600 0L550 0L550 0L500 0L500 0L450 0L450 0L400 0L400 0L350 0L350 0L300 0L300 0L250 0L250 0L200 0L200 0L150 0L150 0L100 0L100 0L50 0L50 0L0 0Z" fill="#282c34"/><path d="M0 163L50 163L50 127L100 127L100 157L150 157L150 169L200 169L200 139L250 139L250 211L300 211L300 91L350 91L350 175L400 175L400 181L450 181L450 121L500 121L500 199L550 199L550 169L600 169L600 181L650 181L650 115L700 115L700 139L750 139L750 187L800 187L800 169L850 169L850 157L900 157L900 175L900 77L900 53L850 53L850 77L800 77L800 71L750 71L750 59L700 59L700 65L650 65L650 83L600 83L600 41L550 41L550 95L500 95L500 71L450 71L450 95L400 95L400 83L350 83L350 47L300 47L300 89L250 89L250 35L200 35L200 77L150 77L150 35L100 35L100 77L50 77L50 95L0 95Z" fill="#20262d"/><path d="M0 283L50 283L50 199L100 199L100 217L150 217L150 295L200 295L200 295L250 295L250 283L300 283L300 217L350 217L350 319L400 319L400 301L450 301L450 253L500 253L500 307L550 307L550 307L600 307L600 325L650 325L650 265L700 265L700 241L750 241L750 265L800 265L800 319L850 319L850 271L900 271L900 307L900 173L900 155L850 155L850 167L800 167L800 185L750 185L750 137L700 137L700 113L650 113L650 179L600 179L600 167L550 167L550 197L500 197L500 119L450 119L450 179L400 179L400 173L350 173L350 89L300 89L300 209L250 209L250 137L200 137L200 167L150 167L150 155L100 155L100 125L50 125L50 161L0 161Z" fill="#192025"/><path d="M0 367L50 367L50 313L100 313L100 409L150 409L150 373L200 373L200 445L250 445L250 451L300 451L300 373L350 373L350 493L400 493L400 511L450 511L450 493L500 493L500 403L550 403L550 493L600 493L600 427L650 427L650 427L700 427L700 337L750 337L750 379L800 379L800 421L850 421L850 403L900 403L900 433L900 305L900 269L850 269L850 317L800 317L800 263L750 263L750 239L700 239L700 263L650 263L650 323L600 323L600 305L550 305L550 305L500 305L500 251L450 251L450 299L400 299L400 317L350 317L350 215L300 215L300 281L250 281L250 293L200 293L200 293L150 293L150 215L100 215L100 197L50 197L50 281L0 281Z" fill="#131a1e"/><path d="M0 601L50 601L50 601L100 601L100 601L150 601L150 601L200 601L200 601L250 601L250 601L300 601L300 601L350 601L350 601L400 601L400 601L450 601L450 601L500 601L500 601L550 601L550 601L600 601L600 601L650 601L650 601L700 601L700 601L750 601L750 601L800 601L800 601L850 601L850 601L900 601L900 601L900 431L900 401L850 401L850 419L800 419L800 377L750 377L750 335L700 335L700 425L650 425L650 425L600 425L600 491L550 491L550 401L500 401L500 491L450 491L450 509L400 509L400 491L350 491L350 371L300 371L300 449L250 449L250 443L200 443L200 371L150 371L150 407L100 407L100 311L50 311L50 365L0 365Z" fill="#0b1417"/></svg>