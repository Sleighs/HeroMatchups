<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 271L50 271L50 271L100 271L100 79L150 79L150 145L200 145L200 109L250 109L250 121L300 121L300 217L350 217L350 145L400 145L400 223L450 223L450 205L500 205L500 211L550 211L550 235L600 235L600 241L650 241L650 163L700 163L700 229L750 229L750 217L800 217L800 115L850 115L850 187L900 187L900 151L900 0L900 0L850 0L850 0L800 0L800 0L750 0L750 0L700 0L700 0L650 0L650 0L600 0L600 0L550 0L550 0L500 0L500 0L450 0L450 0L400 0L400 0L350 0L350 0L300 0L300 0L250 0L250 0L200 0L200 0L150 0L150 0L100 0L100 0L50 0L50 0L0 0Z" fill="#282c34"/><path d="M0 367L50 367L50 403L100 403L100 145L150 145L150 199L200 199L200 181L250 181L250 235L300 235L300 301L350 301L350 211L400 211L400 355L450 355L450 253L500 253L500 325L550 325L550 337L600 337L600 319L650 319L650 235L700 235L700 301L750 301L750 271L800 271L800 211L850 211L850 283L900 283L900 235L900 149L900 185L850 185L850 113L800 113L800 215L750 215L750 227L700 227L700 161L650 161L650 239L600 239L600 233L550 233L550 209L500 209L500 203L450 203L450 221L400 221L400 143L350 143L350 215L300 215L300 119L250 119L250 107L200 107L200 143L150 143L150 77L100 77L100 269L50 269L50 269L0 269Z" fill="#20262d"/><path d="M0 445L50 445L50 451L100 451L100 301L150 301L150 313L200 313L200 265L250 265L250 331L300 331L300 361L350 361L350 379L400 379L400 439L450 439L450 421L500 421L500 379L550 379L550 385L600 385L600 409L650 409L650 325L700 325L700 403L750 403L750 415L800 415L800 367L850 367L850 439L900 439L900 349L900 233L900 281L850 281L850 209L800 209L800 269L750 269L750 299L700 299L700 233L650 233L650 317L600 317L600 335L550 335L550 323L500 323L500 251L450 251L450 353L400 353L400 209L350 209L350 299L300 299L300 233L250 233L250 179L200 179L200 197L150 197L150 143L100 143L100 401L50 401L50 365L0 365Z" fill="#192025"/><path d="M0 565L50 565L50 553L100 553L100 505L150 505L150 511L200 511L200 517L250 517L250 523L300 523L300 505L350 505L350 547L400 547L400 553L450 553L450 523L500 523L500 505L550 505L550 517L600 517L600 523L650 523L650 517L700 517L700 499L750 499L750 499L800 499L800 565L850 565L850 559L900 559L900 565L900 347L900 437L850 437L850 365L800 365L800 413L750 413L750 401L700 401L700 323L650 323L650 407L600 407L600 383L550 383L550 377L500 377L500 419L450 419L450 437L400 437L400 377L350 377L350 359L300 359L300 329L250 329L250 263L200 263L200 311L150 311L150 299L100 299L100 449L50 449L50 443L0 443Z" fill="#131a1e"/><path d="M0 601L50 601L50 601L100 601L100 601L150 601L150 601L200 601L200 601L250 601L250 601L300 601L300 601L350 601L350 601L400 601L400 601L450 601L450 601L500 601L500 601L550 601L550 601L600 601L600 601L650 601L650 601L700 601L700 601L750 601L750 601L800 601L800 601L850 601L850 601L900 601L900 601L900 563L900 557L850 557L850 563L800 563L800 497L750 497L750 497L700 497L700 515L650 515L650 521L600 521L600 515L550 515L550 503L500 503L500 521L450 521L450 551L400 551L400 545L350 545L350 503L300 503L300 521L250 521L250 515L200 515L200 509L150 509L150 503L100 503L100 551L50 551L50 563L0 563Z" fill="#0b1417"/></svg>