<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 109L53 109L53 61L106 61L106 55L159 55L159 37L212 37L212 115L265 115L265 61L318 61L318 115L371 115L371 103L424 103L424 109L476 109L476 79L529 79L529 85L582 85L582 55L635 55L635 97L688 97L688 97L741 97L741 97L794 97L794 49L847 49L847 133L900 133L900 127L900 0L900 0L847 0L847 0L794 0L794 0L741 0L741 0L688 0L688 0L635 0L635 0L582 0L582 0L529 0L529 0L476 0L476 0L424 0L424 0L371 0L371 0L318 0L318 0L265 0L265 0L212 0L212 0L159 0L159 0L106 0L106 0L53 0L53 0L0 0Z" fill="#282c34"/><path d="M0 163L53 163L53 343L106 343L106 199L159 199L159 199L212 199L212 325L265 325L265 187L318 187L318 187L371 187L371 283L424 283L424 277L476 277L476 235L529 235L529 181L582 181L582 157L635 157L635 337L688 337L688 277L741 277L741 187L794 187L794 181L847 181L847 283L900 283L900 241L900 125L900 131L847 131L847 47L794 47L794 95L741 95L741 95L688 95L688 95L635 95L635 53L582 53L582 83L529 83L529 77L476 77L476 107L424 107L424 101L371 101L371 113L318 113L318 59L265 59L265 113L212 113L212 35L159 35L159 53L106 53L106 59L53 59L53 107L0 107Z" fill="#222831"/><path d="M0 337L53 337L53 409L106 409L106 391L159 391L159 295L212 295L212 367L265 367L265 295L318 295L318 271L371 271L371 319L424 319L424 373L476 373L476 349L529 349L529 259L582 259L582 241L635 241L635 445L688 445L688 331L741 331L741 337L794 337L794 319L847 319L847 439L900 439L900 367L900 239L900 281L847 281L847 179L794 179L794 185L741 185L741 275L688 275L688 335L635 335L635 155L582 155L582 179L529 179L529 233L476 233L476 275L424 275L424 281L371 281L371 185L318 185L318 185L265 185L265 323L212 323L212 197L159 197L159 197L106 197L106 341L53 341L53 161L0 161Z" fill="#1c252d"/><path d="M0 559L53 559L53 571L106 571L106 559L159 559L159 487L212 487L212 493L265 493L265 547L318 547L318 487L371 487L371 487L424 487L424 541L476 541L476 505L529 505L529 493L582 493L582 511L635 511L635 523L688 523L688 487L741 487L741 553L794 553L794 487L847 487L847 571L900 571L900 517L900 365L900 437L847 437L847 317L794 317L794 335L741 335L741 329L688 329L688 443L635 443L635 239L582 239L582 257L529 257L529 347L476 347L476 371L424 371L424 317L371 317L371 269L318 269L318 293L265 293L265 365L212 365L212 293L159 293L159 389L106 389L106 407L53 407L53 335L0 335Z" fill="#162229"/><path d="M0 601L53 601L53 601L106 601L106 601L159 601L159 601L212 601L212 601L265 601L265 601L318 601L318 601L371 601L371 601L424 601L424 601L476 601L476 601L529 601L529 601L582 601L582 601L635 601L635 601L688 601L688 601L741 601L741 601L794 601L794 601L847 601L847 601L900 601L900 601L900 515L900 569L847 569L847 485L794 485L794 551L741 551L741 485L688 485L688 521L635 521L635 509L582 509L582 491L529 491L529 503L476 503L476 539L424 539L424 485L371 485L371 485L318 485L318 545L265 545L265 491L212 491L212 485L159 485L159 557L106 557L106 569L53 569L53 557L0 557Z" fill="#101f24"/></svg>