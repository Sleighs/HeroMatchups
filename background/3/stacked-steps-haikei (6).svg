<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 91L47 91L47 91L95 91L95 73L142 73L142 91L189 91L189 61L237 61L237 97L284 97L284 67L332 67L332 91L379 91L379 97L426 97L426 103L474 103L474 91L521 91L521 55L568 55L568 49L616 49L616 73L663 73L663 85L711 85L711 73L758 73L758 91L805 91L805 103L853 103L853 73L900 73L900 37L900 0L900 0L853 0L853 0L805 0L805 0L758 0L758 0L711 0L711 0L663 0L663 0L616 0L616 0L568 0L568 0L521 0L521 0L474 0L474 0L426 0L426 0L379 0L379 0L332 0L332 0L284 0L284 0L237 0L237 0L189 0L189 0L142 0L142 0L95 0L95 0L47 0L47 0L0 0Z" fill="#282c34"/><path d="M0 205L47 205L47 199L95 199L95 163L142 163L142 163L189 163L189 127L237 127L237 205L284 205L284 235L332 235L332 205L379 205L379 163L426 163L426 187L474 187L474 211L521 211L521 199L568 199L568 145L616 145L616 145L663 145L663 133L711 133L711 151L758 151L758 199L805 199L805 187L853 187L853 181L900 181L900 103L900 35L900 71L853 71L853 101L805 101L805 89L758 89L758 71L711 71L711 83L663 83L663 71L616 71L616 47L568 47L568 53L521 53L521 89L474 89L474 101L426 101L426 95L379 95L379 89L332 89L332 65L284 65L284 95L237 95L237 59L189 59L189 89L142 89L142 71L95 71L95 89L47 89L47 89L0 89Z" fill="#2a323b"/><path d="M0 331L47 331L47 331L95 331L95 421L142 421L142 295L189 295L189 265L237 265L237 319L284 319L284 403L332 403L332 337L379 337L379 349L426 349L426 313L474 313L474 433L521 433L521 343L568 343L568 241L616 241L616 331L663 331L663 367L711 367L711 385L758 385L758 355L805 355L805 301L853 301L853 409L900 409L900 301L900 101L900 179L853 179L853 185L805 185L805 197L758 197L758 149L711 149L711 131L663 131L663 143L616 143L616 143L568 143L568 197L521 197L521 209L474 209L474 185L426 185L426 161L379 161L379 203L332 203L332 233L284 233L284 203L237 203L237 125L189 125L189 161L142 161L142 161L95 161L95 197L47 197L47 203L0 203Z" fill="#2b3841"/><path d="M0 385L47 385L47 427L95 427L95 475L142 475L142 355L189 355L189 373L237 373L237 385L284 385L284 469L332 469L332 445L379 445L379 463L426 463L426 355L474 355L474 523L521 523L521 421L568 421L568 367L616 367L616 427L663 427L663 457L711 457L711 511L758 511L758 439L805 439L805 337L853 337L853 469L900 469L900 409L900 299L900 407L853 407L853 299L805 299L805 353L758 353L758 383L711 383L711 365L663 365L663 329L616 329L616 239L568 239L568 341L521 341L521 431L474 431L474 311L426 311L426 347L379 347L379 335L332 335L332 401L284 401L284 317L237 317L237 263L189 263L189 293L142 293L142 419L95 419L95 329L47 329L47 329L0 329Z" fill="#2c3e47"/><path d="M0 601L47 601L47 601L95 601L95 601L142 601L142 601L189 601L189 601L237 601L237 601L284 601L284 601L332 601L332 601L379 601L379 601L426 601L426 601L474 601L474 601L521 601L521 601L568 601L568 601L616 601L616 601L663 601L663 601L711 601L711 601L758 601L758 601L805 601L805 601L853 601L853 601L900 601L900 601L900 407L900 467L853 467L853 335L805 335L805 437L758 437L758 509L711 509L711 455L663 455L663 425L616 425L616 365L568 365L568 419L521 419L521 521L474 521L474 353L426 353L426 461L379 461L379 443L332 443L332 467L284 467L284 383L237 383L237 371L189 371L189 353L142 353L142 473L95 473L95 425L47 425L47 383L0 383Z" fill="#2e454c"/></svg>