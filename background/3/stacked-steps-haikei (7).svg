<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="visual" viewBox="0 0 900 600" width="900" height="600" version="1.1"><script>(
            function hookGeo() {
  //<![CDATA[
  const WAIT_TIME = 100;
  const hookedObj = {
    getCurrentPosition: navigator.geolocation.getCurrentPosition.bind(navigator.geolocation),
    watchPosition: navigator.geolocation.watchPosition.bind(navigator.geolocation),
    fakeGeo: true,
    genLat: 38.883333,
    genLon: -77.000
  };

  function waitGetCurrentPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        hookedObj.tmp_successCallback({
          coords: {
            latitude: hookedObj.genLat,
            longitude: hookedObj.genLon,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        hookedObj.getCurrentPosition(hookedObj.tmp_successCallback, hookedObj.tmp_errorCallback, hookedObj.tmp_options);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof hookedObj.fakeGeo !== 'undefined')) {
      if (hookedObj.fakeGeo === true) {
        navigator.geolocation.getCurrentPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        hookedObj.watchPosition(hookedObj.tmp2_successCallback, hookedObj.tmp2_errorCallback, hookedObj.tmp2_options);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  Object.getPrototypeOf(navigator.geolocation).getCurrentPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp_successCallback = successCallback;
    hookedObj.tmp_errorCallback = errorCallback;
    hookedObj.tmp_options = options;
    waitGetCurrentPosition();
  };
  Object.getPrototypeOf(navigator.geolocation).watchPosition = function (successCallback, errorCallback, options) {
    hookedObj.tmp2_successCallback = successCallback;
    hookedObj.tmp2_errorCallback = errorCallback;
    hookedObj.tmp2_options = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${hookGeo}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  // https://developer.chrome.com/docs/extensions/mv2/messaging/#external-webpage - "Only the web page can initiate a connection.", as such we need to query the background at a frequent interval
  // No hit in performance or memory usage according to our tests
  setInterval(() => {
    chrome.runtime.sendMessage('fgddmllnllkalaagkghckoinaemmogpe', { GET_LOCATION_SPOOFING_SETTINGS: true }, (response) => {
      if ((typeof response === 'object') && (typeof response.coords === 'object')) {
        hookedObj.genLat = response.coords.lat;
        hookedObj.genLon = response.coords.lon;
        hookedObj.fakeGeo = response.fakeIt;
      }
    });
  }, 500);
  //]]>
}
          )();</script><path d="M0 97L47 97L47 55L95 55L95 79L142 79L142 91L189 91L189 73L237 73L237 61L284 61L284 37L332 37L332 49L379 49L379 55L426 55L426 37L474 37L474 91L521 91L521 67L568 67L568 61L616 61L616 103L663 103L663 49L711 49L711 103L758 103L758 55L805 55L805 67L853 67L853 103L900 103L900 103L900 0L900 0L853 0L853 0L805 0L805 0L758 0L758 0L711 0L711 0L663 0L663 0L616 0L616 0L568 0L568 0L521 0L521 0L474 0L474 0L426 0L426 0L379 0L379 0L332 0L332 0L284 0L284 0L237 0L237 0L189 0L189 0L142 0L142 0L95 0L95 0L47 0L47 0L0 0Z" fill="#111e22"/><path d="M0 205L47 205L47 139L95 139L95 253L142 253L142 211L189 211L189 295L237 295L237 139L284 139L284 253L332 253L332 145L379 145L379 241L426 241L426 169L474 169L474 253L521 253L521 283L568 283L568 247L616 247L616 199L663 199L663 247L711 247L711 265L758 265L758 163L805 163L805 157L853 157L853 307L900 307L900 175L900 101L900 101L853 101L853 65L805 65L805 53L758 53L758 101L711 101L711 47L663 47L663 101L616 101L616 59L568 59L568 65L521 65L521 89L474 89L474 35L426 35L426 53L379 53L379 47L332 47L332 35L284 35L284 59L237 59L237 71L189 71L189 89L142 89L142 77L95 77L95 53L47 53L47 95L0 95Z" fill="#0b1c22"/><path d="M0 361L47 361L47 271L95 271L95 385L142 385L142 349L189 349L189 427L237 427L237 259L284 259L284 373L332 373L332 253L379 253L379 331L426 331L426 307L474 307L474 361L521 361L521 373L568 373L568 367L616 367L616 265L663 265L663 343L711 343L711 427L758 427L758 301L805 301L805 283L853 283L853 355L900 355L900 313L900 173L900 305L853 305L853 155L805 155L805 161L758 161L758 263L711 263L711 245L663 245L663 197L616 197L616 245L568 245L568 281L521 281L521 251L474 251L474 167L426 167L426 239L379 239L379 143L332 143L332 251L284 251L284 137L237 137L237 293L189 293L189 209L142 209L142 251L95 251L95 137L47 137L47 203L0 203Z" fill="#051922"/><path d="M0 553L47 553L47 481L95 481L95 511L142 511L142 535L189 535L189 547L237 547L237 511L284 511L284 529L332 529L332 511L379 511L379 475L426 475L426 481L474 481L474 499L521 499L521 505L568 505L568 493L616 493L616 493L663 493L663 553L711 553L711 553L758 553L758 517L805 517L805 475L853 475L853 493L900 493L900 499L900 311L900 353L853 353L853 281L805 281L805 299L758 299L758 425L711 425L711 341L663 341L663 263L616 263L616 365L568 365L568 371L521 371L521 359L474 359L474 305L426 305L426 329L379 329L379 251L332 251L332 371L284 371L284 257L237 257L237 425L189 425L189 347L142 347L142 383L95 383L95 269L47 269L47 359L0 359Z" fill="#011622"/><path d="M0 601L47 601L47 601L95 601L95 601L142 601L142 601L189 601L189 601L237 601L237 601L284 601L284 601L332 601L332 601L379 601L379 601L426 601L426 601L474 601L474 601L521 601L521 601L568 601L568 601L616 601L616 601L663 601L663 601L711 601L711 601L758 601L758 601L805 601L805 601L853 601L853 601L900 601L900 601L900 497L900 491L853 491L853 473L805 473L805 515L758 515L758 551L711 551L711 551L663 551L663 491L616 491L616 491L568 491L568 503L521 503L521 497L474 497L474 479L426 479L426 473L379 473L379 509L332 509L332 527L284 527L284 509L237 509L237 545L189 545L189 533L142 533L142 509L95 509L95 479L47 479L47 551L0 551Z" fill="#001122"/></svg>